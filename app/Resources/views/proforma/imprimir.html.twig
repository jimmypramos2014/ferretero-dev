<!DOCTYPE html>
<html lang="es">

    <meta charset="utf-8">
    <head>
        <title>Proforma</title>
        <style type="text/css">

            body {
                font-family:"Myriad Pro";
                font-size:12pt;
                background-image: url({{ 'http://' ~ host ~ '/formatos/' ~ app.session.get('empresa') ~ '/proforma.jpg' }});
                background-repeat: no-repeat;
                background-size: 100%;
            }

       
        </style>
    </head>

    <body>

        {% set fecha_X = 0 %}
        {% set fecha_Y = 0 %}
        {% set cantidad_X = 0 %}
        {% set cantidad_Y = 0 %}
        {% set codigoProducto_X = 0 %}
        {% set codigoProducto_Y = 0 %}        
        {% set descripcion_X = 0 %}
        {% set descripcion_Y = 0 %}
        {% set precioUnitario_X = 0 %}
        {% set precioUnitario_Y = 0 %}
        {% set importe_X = 0 %}
        {% set importe_Y = 0 %}
        {% set igvTotal_X = 0 %}
        {% set igvTotal_Y = 0 %}  
        {% set subTotal_X = 0 %}
        {% set subTotal_Y = 0 %}          
        {% set total_X = 0 %}
        {% set total_Y = 0 %}
        {% set inicioDetalle_X = 0 %}
        {% set inicioDetalle_Y = 0 %}
        {% set finDetalle_X = 0 %}
        {% set finDetalle_Y = 0 %}

        {% set numero_X = 0 %}
        {% set numero_Y = 0 %}
        {% set cliente_X = 0 %}
        {% set cliente_Y = 0 %}

        {% set nombreEmpresa_X = 0 %}
        {% set nombreEmpresa_Y = 0 %}

        {% set direccionEmpresa_X = 0 %}
        {% set direccionEmpresa_Y = 0 %}
        {% set contactoEmpresa_X = 0 %}
        {% set contactoEmpresa_Y = 0 %}
        {% set rucEmpresa_X = 0 %}
        {% set rucEmpresa_Y = 0 %}
        {% set emailWebEmpresa_X = 0 %}
        {% set emailWebEmpresa_Y = 0 %}

        {% set telefonoCliente_X = 0 %}
        {% set telefonoCliente_Y = 0 %}
        {% set validezOferta_X = 0 %}
        {% set validezOferta_Y = 0 %}
        {% set plazoEntrega_X = 0 %}
        {% set plazoEntrega_Y = 0 %}
        {% set formaPago_X = 0 %}
        {% set formaPago_Y = 0 %}
        {% set empleadoCotiza_X = 0 %}
        {% set empleadoCotiza_Y = 0 %}
        {% set correoEmpleadoCotiza_X = 0 %}
        {% set correoEmpleadoCotiza_Y = 0 %}
        {% set marca_X = 0 %}
        {% set marca_Y = 0 %}
        {% set inicioCuentasBancoEmpresa_X = 0 %}
        {% set inicioCuentasBancoEmpresa_Y = 0 %}
        {% set finCuentasBancoEmpresa_X = 0 %}
        {% set finCuentasBancoEmpresa_Y = 0 %}

        {% for componenteXDocumento in componentesXDocumento %}
            
            {% if componenteXDocumento.componente.nombre == 'fecha' %}
                {% set fecha_X = componenteXDocumento.posicionX %}
                {% set fecha_Y = componenteXDocumento.posicionY %}
            {% endif %}


            {% if componenteXDocumento.componente.nombre == 'cantidad' %}
                {% set cantidad_X = componenteXDocumento.posicionX %}
                {% set cantidad_Y = componenteXDocumento.posicionY %}
            {% endif %}


            {% if componenteXDocumento.componente.nombre == 'descripcion' %}
                {% set descripcion_X = componenteXDocumento.posicionX %}
                {% set descripcion_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'marca' %}
                {% set marca_X = componenteXDocumento.posicionX %}
                {% set marca_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'precioUnitario' %}
                {% set precioUnitario_X = componenteXDocumento.posicionX %}
                {% set precioUnitario_Y = componenteXDocumento.posicionY %}
            {% endif %}


            {% if componenteXDocumento.componente.nombre == 'importe' %}
                {% set importe_X = componenteXDocumento.posicionX %}
                {% set importe_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'igvTotal' %}
                {% set igvTotal_X = componenteXDocumento.posicionX %}
                {% set igvTotal_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'subTotal' %}
                {% set subTotal_X = componenteXDocumento.posicionX %}
                {% set subTotal_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'total' %}
                {% set total_X = componenteXDocumento.posicionX %}
                {% set total_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'inicioDetalle' %}
                {% set inicioDetalle_X = componenteXDocumento.posicionX %}
                {% set inicioDetalle_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'finDetalle' %}
                {% set finDetalle_X = componenteXDocumento.posicionX %}
                {% set finDetalle_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'numero' %}
                {% set numero_X = componenteXDocumento.posicionX %}
                {% set numero_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'cliente' %}
                {% set cliente_X = componenteXDocumento.posicionX %}
                {% set cliente_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'nombreEmpresa' %}
                {% set nombreEmpresa_X = componenteXDocumento.posicionX %}
                {% set nombreEmpresa_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'direccionEmpresa' %}
                {% set direccionEmpresa_X = componenteXDocumento.posicionX %}
                {% set direccionEmpresa_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'contactoEmpresa' %}
                {% set contactoEmpresa_X = componenteXDocumento.posicionX %}
                {% set contactoEmpresa_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'rucEmpresa' %}
                {% set rucEmpresa_X = componenteXDocumento.posicionX %}
                {% set rucEmpresa_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'emailWebEmpresa' %}
                {% set emailWebEmpresa_X = componenteXDocumento.posicionX %}
                {% set emailWebEmpresa_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'telefonoCliente' %}
                {% set telefonoCliente_X = componenteXDocumento.posicionX %}
                {% set telefonoCliente_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'validezOferta' %}
                {% set validezOferta_X = componenteXDocumento.posicionX %}
                {% set validezOferta_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'plazoEntrega' %}
                {% set plazoEntrega_X = componenteXDocumento.posicionX %}
                {% set plazoEntrega_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'formaPago' %}
                {% set formaPago_X = componenteXDocumento.posicionX %}
                {% set formaPago_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'empleadoCotiza' %}
                {% set empleadoCotiza_X = componenteXDocumento.posicionX %}
                {% set empleadoCotiza_Y = componenteXDocumento.posicionY %}
            {% endif %}
             
            {% if componenteXDocumento.componente.nombre == 'correoEmpleadoCotiza' %}
                {% set correoEmpleadoCotiza_X = componenteXDocumento.posicionX %}
                {% set correoEmpleadoCotiza_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'inicioCuentasBancoEmpresa' %}
                {% set inicioCuentasBancoEmpresa_X = componenteXDocumento.posicionX %}
                {% set inicioCuentasBancoEmpresa_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'finCuentasBancoEmpresa' %}
                {% set finCuentasBancoEmpresa_X = componenteXDocumento.posicionX %}
                {% set finCuentasBancoEmpresa_Y = componenteXDocumento.posicionY %}
            {% endif %}

            {% if componenteXDocumento.componente.nombre == 'codigoProducto' %}
                {% set codigoProducto_X = componenteXDocumento.posicionX %}
                {% set codigoProducto_Y = componenteXDocumento.posicionY %}
            {% endif %}


        {% endfor %}

        {#<span id="nombreEmpresa" style="position:absolute; top: {{ nombreEmpresa_X }}px; left:{{ nombreEmpresa_Y }}px; width: 220px;font-size:12pt;font-weight:bold;">{{ localObj.empresa.nombreCorto | upper }}xxxxxxxxx</span>

        {% if localObj.empresa.direccion %}
            <span id="direccionEmpresa" style="position:absolute; top: {{ direccionEmpresa_X }}px; left:{{ direccionEmpresa_Y }}px; width: 220px;font-size:11pt;">{{ localObj.empresa.direccion }}</span>
        {% endif %}

        {% if localObj.telefono %}

            <span id="contactoEmpresa" style="position:absolute; top: {{ contactoEmpresa_X }}px; left:{{ contactoEmpresa_Y }}px; width: 220px;font-size:11pt;;">{{ localObj.telefono ~ ' ' }} </span>

        {% endif %}

        <span class="rucEmpresa" style="position:absolute; top:{{ rucEmpresa_X }}px; left:{{ rucEmpresa_Y }}px; width: 220px; color: #000000;font-size:11pt;font-weight:bold;">{{ localObj.empresa.ruc }}</span>
        <span class="emailWebEmpresa" style="position:absolute; top:{{ emailWebEmpresa_X }}px; left:{{ emailWebEmpresa_Y }}px; width: 220px;font-size:11pt;">{{ localObj.email ? localObj.email : '' }} {{ localObj.empresa.direccionWeb ? ' ' ~ localObj.empresa.direccionWeb : ''}} </span>

        <span class="numero" style="position:absolute; top:{{ numero_X }}px; left:{{ numero_Y }}px; width: 300px; color: #000000;font-size:18pt;font-weight:bold;">{{ facturaVenta.numeroProforma }}</span>

        <span class="cliente" style="position:absolute; top:{{ cliente_X }}px; left:{{ cliente_Y }}px; width: 400px; color: black;">{{ facturaVenta.cliente  }}</span>

        <span class="fecha" style="position:absolute; top:{{fecha_X}}px; left:{{fecha_Y}}px; width: 300px; color: black;">{{ facturaVenta.fecha | date('d/m/Y') }}</span>

        <span class="telefonoCliente" style="position:absolute; top:{{ telefonoCliente_X }}px; left:{{ telefonoCliente_Y }}px; width: 200px; color: black;">{{ facturaVenta.telefonoCliente  }}</span>#}

        {% set top = inicioDetalle_X %}
        {% set end = finDetalle_X %}
        {% set item = 1 %}
        {% set impuesto = 0 %}
        {% set total = 0 %}
        {% set marcador = 400 %}

        <div style="position:absolute; top: 15px; left: 60px; color: black;">

            <table  width="1285" border="0" style="border-spacing: .5em;">
                <tr>
                    <td width="28%" style="">
                        {% if localObj.empresa.logo %}
                            <img src="{{ app.request.getSchemeAndHttpHost() ~ '/uploads/imagenes/' ~ localObj.empresa.logo }}" alt="" >{#width="320px" height="80px"#}
                        {% endif %}

                    </td>

                    <td width="40%" align="center" style="padding:5px;font-weight:bold;font-size:16pt;">
                        {{ 'COTIZACIÓN ' ~ facturaVenta.numeroProforma }}
                    </td>

                    <td width="32%" align="center" style="">

                        <table border="0" >
                            <tr>
                                <th align="left" style="font-size:14pt;" colspan="3">{{ localObj.empresa.nombreCorto | upper }}</th>          
                            </tr>

                            <tr>
                                <th align="right" width="5%" style="font-size:14pt;">RUC</th>
                                <th width="1%" style="font-size:14pt;">:</th>
                                <td width="94%" style="font-size:12pt;">{{ localObj.empresa.ruc  }}</td>              
                            </tr>
                            <tr>
                                <th align="right" width="5%" style="font-size:14pt;">Dirección</th>
                                <th width="1%" style="font-size:14pt;">:</th>
                                <td width="94%" style="font-size:12pt;">
                                    {% if localObj.empresa.direccion %}
                                        {{ localObj.empresa.direccion }}
                                    {% endif %}
                                </td>              
                            </tr>
                            <tr>
                                <th align="right" width="5%" style="font-size:14pt;">Teléfono</th>
                                <th width="1%" style="font-size:14pt;">:</th>
                                <td width="94%" style="font-size:12pt;">        
                                    {% if localObj.telefono %}
                                        {{ localObj.telefono ~ ' ' }}
                                    {% endif %}
                                </td>              
                            </tr>
                            <tr>
                                <th align="right" width="5%" style="font-size:14pt;">E-mail</th>
                                <th width="1%" style="font-size:14pt;">:</th>
                                <td width="94%" style="font-size:12pt;">{{ localObj.email ? localObj.email : '' }} {{ localObj.empresa.direccionWeb ? ' ' ~ localObj.empresa.direccionWeb : ''}}</td>              
                            </tr>                                                        
                                        
                        </table>

                    </td>

                </tr>

            </table>

            <br>

            <table  width="858" border="0" >
                <tr>
                    <th align="left" width="5%" style="font-size:14pt;">Señores</th>
                    <th width="1%" style="font-size:14pt;">:</th>
                    <td width="57%" style="font-size:14pt;">{{ facturaVenta.cliente  }}</td>
                    <th width="5%" align="left" style="font-size:14pt;">Teléfono</th>
                    <th width="1%" style="font-size:14pt;">:</th>
                    <td width="31%" style="font-size:14pt;">{{ facturaVenta.telefonoCliente  }}</td>                    
                </tr>
                <tr>
                    <th align="left" width="5%" style="font-size:14pt;">Fecha</th>
                    <th width="1%" style="font-size:14pt;">:</th>
                    <td width="57%" style="font-size:14pt;">{{ facturaVenta.fecha | date('d/m/Y') }}</td>
                    <th width="5%" align="left" style="font-size:14pt;"></th>
                    <th width="1%" style="font-size:14pt;"></th>
                    <td width="31%" style="font-size:14pt;"></td>                      
                </tr>
                            
            </table>
            <br>



            <div style="font-size:14pt;">Nos es grato saludarlos y a la vez hacerles llegar nuestra cotización de acuerdo a lo solicitado.</div>
            <div style="height:10px;"></div>

            <table  width="1285" border="0" style="border-top: 1px solid;border-bottom: 1px solid;border-left: 1px solid;border-right: 1px solid;">
    
                <tr style="background-color:#E73942;">
                    <th width="4%" align="center" style="border-bottom: 1px solid;color:#FFFFFF;font-size:14pt;" >Item</th>
                    <th width="5%" align="center" style="border-bottom: 1px solid;color:#FFFFFF;font-size:14pt;">Cód</th>
                    <th width="45%" align="center" style="border-bottom: 1px solid;color:#FFFFFF;font-size:14pt;">Descripción</th>
                    <th width="8%" align="center" style="border-bottom: 1px solid;color:#FFFFFF;font-size:14pt;">Marca</th>
                    <th width="9%" align="center" style="border-bottom: 1px solid;color:#FFFFFF;font-size:14pt;">Cantidad</th>
                    <th width="15%" align="center" style="border-bottom: 1px solid;color:#FFFFFF;font-size:14pt;">P.Unitario</th>
                    <th align="center" style="border-bottom: 1px solid;color:#FFFFFF;font-size:14pt;">P.Total</th>                    
                </tr>


                {% for d in facturaVenta.venta.detalleVenta %}
                    <tr>
                        <td width="4%" align="center" style="">{{ item }}</td>
                        <td width="5%" align="center" style="">{{ d.productoXLocal.producto.codigo }}</td>
                        <td width="45%" align="left" style="">{{ d.productoXLocal.producto.nombre | upper  }} {{ d.descripcion ? ' - ' ~  d.descripcion | upper  : ''  }}</td>
                        <td width="8%" align="center" style="">{{ d.productoXLocal.producto.marca | upper }}</td>
                        <td width="9%" align="center " style="">{{ d.cantidad }}</td>

                        {% set precio = d.subtotal / d.cantidad %}
                        <td width="15%" align="center" style="">{{ precio | number_format(2, '.', ',') }}</td>
                        <td align="center" style="">{{ d.subtotal | number_format(2, '.', ',') }}</td>                    
                    </tr>
                    {% set item = item + 1 %}
                    {% set total = total + d.subtotal %}
                {% endfor %}
                

            </table>

            <table  width="1285" border="0" >

                {% if facturaVenta.incluirIgv %}
        
                    {% set subtotal = total/1.18 %}
                    {% set igvtotal = subtotal * 0.18 %}

                {% else %}

                    {% set subtotal = total %}
                    {% set igvtotal = 0.18 * subtotal %}
                    {% set total = igvtotal +  subtotal %}

                {% endif %}
                <tr>
                    <td width="71%" ></td>
                    <th width="15%" align="right" style="font-size:16px;border-color:#5e5c5c;background-color:#5e5c5c;color:white; border-left: 1px solid;border-top: 1px solid;border-right: 1px solid;border-bottom: 0;">Subtotal {{ facturaVenta.venta.ventaFormaPago[0].moneda.id == 1 ? ' S./ ' : ' $ ' }}</th>
                    <th align="center" style="font-size:16px;border-left: 1px solid;border-right: 1px solid;border-top: 1px solid;">{{ subtotal | number_format(2, '.', ',')  }}</th>                    
                </tr>

                <tr>
                    <td ></td>
                    <th align="right" style="font-size:16px;border-color:#5e5c5c;background-color:#5e5c5c;color:white;border-left: 1px solid;border-right: 1px solid;border-bottom: 0;">I.G.V. 18%</th>
                    <th align="center" style="font-size:16px;border-left: 1px solid;border-right: 1px solid;">{{ igvtotal | number_format(2, '.', ',')  }}</th>                    
                </tr>

                <tr>
                    <td ></td>
                    <th align="right" style="font-size:16px;border-color:#5e5c5c;background-color:#5e5c5c;color:white;border-left: 1px solid;border-bottom: 1px solid;border-right: 1px solid;">Total {{ facturaVenta.venta.ventaFormaPago[0].moneda.id == 1 ? ' S./ ' : ' $ ' }}</th>
                    <th align="center" style="font-size:16px;border-left: 1px solid;border-bottom: 1px solid;border-right: 1px solid;">{{ total | number_format(2, '.', ',')  }}</th>                    
                </tr>

            </table>

            <br>

            <table  width="500" border="0" style="float: left;">
                <tr>
                    <th width="100%" align="left" colspan="2" style="font-weight:bold;">CONDICIONES COMERCIALES</th>              
                </tr>
                
                <tr>
                    <td width="35%">Validez de la oferta :</td>
                    <td>{{ facturaVenta.validezOferta | upper }}</td>
                </tr>

                <tr>
                    <td>Plazo de entrega :</td>
                    <td>{{ facturaVenta.plazoEntrega | upper }}</td>
                </tr>
                <tr>
                    <td>Forma de pago :</td>
                    <td>{{ facturaVenta.venta.ventaFormaPago[0].formaPago | upper }}</td>
                </tr>
               
                <tr>
                    <td colspan="2"></td>
                </tr>
                <tr>
                    <td colspan="2"></td>
                </tr>
                <tr>
                    <td colspan="2"></td>
                </tr>
                <tr>
                    <td colspan="2">Atentamente,</td>
                </tr>
                <tr>
                    <td colspan="2"></td>
                </tr>                                
                <tr>
                    <th colspan="2" align="left">{{ facturaVenta.empleadoCotiza | upper }}</th>
                </tr>
                <tr>
                    <td colspan="2">{{ facturaVenta.correoEmpleadoCotiza }}</td>
                </tr>
            </table>

            <table  width="500" border="0">
                <tr>
                    <th width="100%" align="left" style="font-weight:bold;">CUENTAS BANCARIAS</th>              
                </tr>
                
                {% for cuentaBanco in  cuentasBancarias  if cuentaBanco.estado %}

                    <tr>
                        <td>{{ cuentaBanco | upper ~ ' ' ~ cuentaBanco.moneda | upper ~ '  ' ~ cuentaBanco.numero | upper }}</td>
                    </tr>
                    
                {% endfor %}


            </table>

            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>


            <div style="width:1285px;text-align:center;">
                <img src="{{ 'http://' ~ host ~ '/formatos/' ~ app.session.get('empresa') ~ '/cotizacion.jpg' }}" alt="" width="1100px" height="52px">
            </div>
            

        </div>




    </body>
</html>